<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/drivers/index.css" />
<%- include('../partials/nav') %>


<main>
  <h1><%= title %></h1>
  <table id="list">
    <thead>
      <tr>
        <th>First</th>
        <th>Last</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>

      <%# Oh hey, this is an ejs comment! It starts with a # %>
      <% drivers.forEach(driver => { %>
        <tr class="driver">
          <td><%= driver.first %></td>
          <td><%= driver.last %></td>
          <td><a href="/drivers/<%= driver._id %>">DETAILS</a></td>
          <td>
            <% if (user) { %>
              <% if (driver.owner?.equals(user?.profile._id)) { %>
                <form action="/drivers/<%= driver._id %>?_method=DELETE" method="POST">
                  <button class="btn" type="submit">Delete</button>
                </form>
              <% } %>
            <% } %>
            </td>
          </tr>
      <% }) %>

    </tbody>
  </table>

  <a href="/drivers/new"><button type="submit" class="add">Add Driver</button></a>
</main>

<%- include('../partials/footer') %>